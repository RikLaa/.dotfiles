# get local aliases (not under version control)
if [ -f ~/.aliases_local ]; then
    source ~/.aliases_local
    alias aliases_local='$EDITOR ~/.aliases_local'
fi


# ======== CONFIGURATIONS ============
alias zshrc='$EDITOR ~/.zshrc'
alias vimrc='$EDITOR ~/.vimrc'
alias aliases='$EDITOR ~/.aliases'
alias gitconfig='$EDITOR ~/.gitconfig'
alias dotfiles='cd ~/.dotfiles && ls -al'
alias dot='cd ~/.dotfiles && ls -al'
alias tmuxconf='$EDITOR ~/.tmux.conf'

alias school='cd ~/Code/school'
alias work='cd ~/Code/work'
alias me='cd ~/Code/me'


# ======== FILE SYSTEM ============
# extend cd to always list files when navigating
function cd() { builtin cd "$@" && ls -l; }

# move backwards more easily
goBack() { cd ..; }
alias ..='cd ..'
bindkey -s '^n^h' 'goBack\n'

alias l='ls -al'

tree() { find "$@" | sed -e 's;[^/]*/;|____;g;s;____|; |;g' }

alias vpn='cd /etc/openvpn/'

alias www='cd /var/www/ && ls'

# create delete folders
alias rmd='rm -Rf'
alias touchd='mkdir'

alias dirs='dirs -v'

# is not osx
if [[ ! $(uname) =~ "Darwin" ]]; then
    alias pbcopy='xclip -selection clipboard'
    alias pbpaste='xclip -selection clipboard -o'
fi



# ======== OTHER ============
alias php-server='php -S localhost:8000' 


if [ -x "$(command -v nvim)" ]; then
    alias vim="nvim"
else
    if [ -x "$(command -v vim)" ]; then
        alias="vim"
    else
        alias="vi"
    fi
fi

alias e='emacs'


# ======== APPLICATIONS ============

# TMUX
# Force tmux to open in 256 colour mode
alias tmux='tmux -2'
alias tmd='tmux detach'
alias tmas='tmux attach'
alias tmks='tmux kill-session'
alias tmkp='tmux kill-pane'
alias tmkw='tmux kill-window'

# Create new sessions
function tm() {
    if [ -n "$1" ]; then
        name=$1
    else
        name=$(basename "$PWD" | sed -E 's/\.//g')
    fi

    tmux has -t $name
    has_session=$?

    
    if [ $has_session -eq 1 ]; then
        tmux new-session -n vim -d -s $name 
        tmux new-window -n terminal
        tmux attach-session -d -t $name:vim

    else
        # Create session without name
        tmux new-session -n vim -d 
        tmux new-window -n terminal
        tmux attach-session -d -t :vim
    fi
}

# tmux attach session
function tma() {
    # check if fzf is installed (allows to use interactive selector)
    if [ -x "$(command -v fzf)" ]; then
        # get sessions
        sessions=$(tmux list-sessions -F '#{session_name}')
        # get session count with wc
        sessions_count=$(echo "{$sessions}" | wc -l)

        # check if any sessions exists
        if [ -n $sessions ]; then
            # if only one session exists, attach to it immediatly
            if [ $sessions_count -eq 1 ]; then
                tmux attach
            else
                tmux attach -t $(tmux list-sessions | fzf --reverse | sed 's/\([a-zA-z0-9]:\).*/\1/')
            fi
        fi
    else
        # fzf not found, use the default 'attach' command
        tmux attach
    fi
}


# DOCKER
alias d-c='docker-compose'
alias docker-stop-all='docker kill $(docker ps -q)'
alias docker-rm-containers='docker rm $(docker ps -a -q)'
alias docker-rm-images=' docker rmi $(docker images -q)'


# REACT NATIVE 
alias rn='react-native'

# ANDROID-STUDIO
alias react-native-android-emulator='/Users/rikulaa/Library/Android/sdk/tools/emulator -avd react-native -netdelay none -netspeed full'
